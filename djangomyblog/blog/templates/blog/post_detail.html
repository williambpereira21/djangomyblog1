{% extends "blog/_base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}

<div class="post-card">
    <h2>{{ post.title }}</h2>
    <p class="post-meta">
        Por <span>{{ post.user.username }}</span> em {{ post.created_at|date:"d/m/Y H:i" }}
        {% if post.user.id == user.id %}
        <small>
            <a href="{% url 'edit_post' post.id %}" title="Editar Post">âœï¸</a>
            <a href="{% url 'delete_post' post.id %}" title="Apagar Post" onclick="return confirm('Tem certeza que deseja apagar o Post? Isso Ã© irreversÃ­vel!')">ğŸ—‘ï¸</a>
        </small>
        {% endif %}
    </p>
    <p>{{ post.content }}</p>
</div>

{# ---------- FormulÃ¡rio de ComentÃ¡rio ---------- #}
{% if user.is_authenticated %}
<form method="post" class="comment-form">
    {% csrf_token %}
    {{ form.comment }}
    <button type="submit">Enviar</button>
</form>
{% else %}
<p class="comment-empty">FaÃ§a login para comentar.</p>
{% endif %}

{# ---------- Lista de ComentÃ¡rios ---------- #}
<div class="comment-list">
    {% for comment in comments %}
    <div class="comment-item">
        <div class="comment-meta">
            <span>{{ comment.user.username }}</span> em {{ comment.created_at|date:"d/m/Y H:i" }}
        </div>
        <div class="comment-content">
            {{ comment.comment }}
        </div>
    </div>
    {% empty %}
    <p class="comment-empty">Sem comentÃ¡rios ainda.</p>
    {% endfor %}
</div>

{% endblock %}
